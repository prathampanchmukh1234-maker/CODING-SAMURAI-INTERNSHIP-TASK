<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login | My Blog</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>üîê Welcome to My Blog</h1>
  <p>Create an account or login to post</p>
</header>

<div class="auth-container glass">
  <h2>Login / Signup</h2>

  <input id="name" placeholder="Name (for signup)">
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">

  <button onclick="register()">Register</button>
  <button onclick="login()">Login</button>

  <p style="margin-top:10px;">
    After login, go to 
    <a href="/index.html" style="color:#ff6b6b;">Blog Page</a>
  </p>
</div>

<script>
async function register() {
  const res = await fetch("http://localhost:5000/auth/register", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      name: name.value,
      email: email.value,
      password: password.value
    })
  });

  const data = await res.json();

  if (data.token) {
    localStorage.setItem("token", data.token);
    alert("Registered Successfully!");
    window.location.href = "/index.html";   // redirect
  } else {
    alert("Registration failed!");
  }
}

async function login() {
  const res = await fetch("http://localhost:5000/auth/login", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      email: email.value,
      password: password.value
    })
  });

  const data = await res.json();

  if (data.token) {
    localStorage.setItem("token", data.token);
    alert("Logged in Successfully!");
    window.location.href = "/index.html";   // redirect
  } else {
    alert("Invalid credentials!");
  }
}
</script>

</body>
</html>
